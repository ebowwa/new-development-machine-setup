version: 1.1.0
date: 2025-01-12
author: Claude Code Assistant

changes:
  - category: Added
    items:
      - description: Doppler CLI installation support
        details:
          - Added install_doppler() function to setup.sh
          - Supports macOS via Homebrew tap
          - Supports Debian/Ubuntu via official APT repository
          - Supports RedHat/CentOS via YUM repository
          - Automatic token configuration if DOPPLER_TOKEN is available
          
      - description: Dynamic environment detection
        details:
          - Auto-detects GitHub Codespaces via CODESPACES environment variable
          - Auto-detects VPS/production nodes via environment variables and hostname patterns
          - Auto-detects CI/CD pipelines
          - Auto-detects container environments
          - Automatically adjusts tool installation based on detected environment
          
  - category: Fixed
    items:
      - description: Node.js version compatibility in Codespaces
        details:
          - Added version checking for Node.js before installing Claude Code
          - Automatically upgrades to Node.js 20 LTS if version is below 18
          - Fixed npm package installation issues in Ubuntu 24.04
          
      - description: Improved verification function
        details:
          - Now only verifies tools that should be installed for the detected environment
          - Prevents false errors for intentionally skipped tools
          
  - category: Enhanced
    items:
      - description: Better Codespaces support
        details:
          - Automatically skips Tailscale in Codespaces (not needed)
          - Includes Doppler in default Codespaces tool list
          - Handles GitHub token authentication properly
          
      - description: Command-line arguments
        details:
          - Added --skip-doppler flag for selective installation
          - All skip flags now properly handled in argument parsing
          
      - description: Tool configuration
        details:
          - Doppler added to default tools list for VPS and Codespaces
          - Smart tool selection based on environment type
          - Better handling of tool updates for already installed packages

environment_specific_behavior:
  codespaces:
    - Installs: GitHub CLI, Claude Code, Doppler
    - Skips: Tailscale
    - Auto-detected: Yes
    
  vps:
    - Installs: Tailscale, GitHub CLI, Doppler
    - Skips: Claude Code
    - Auto-detected: Yes (via hostname patterns or environment variables)
    
  local_dev:
    - Installs: Tailscale, GitHub CLI, Claude Code
    - Skips: None by default
    - Auto-detected: Yes (macOS with VS Code)
    
  ci_cd:
    - Installs: GitHub CLI only
    - Skips: Tailscale, Claude Code, Doppler
    - Auto-detected: Yes (via CI environment variables)

testing:
  - Tested on GitHub Codespaces with Ubuntu 24.04
  - Doppler v3.75.1 successfully installed
  - Node.js v22.17.0 compatibility verified
  - Auto-detection working correctly without manual --env flag

notes:
  - No manual environment specification needed in most cases
  - Script now handles version conflicts gracefully
  - Improved error messages and warnings for missing tokens
  - Repository setup automated for all package managers